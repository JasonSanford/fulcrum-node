{"version":3,"sources":["../../src/actions/track.js"],"names":["Track","file","id","formData","FormData","accessKey","uuid","v4","append","resourceName","options","body","headers","client","api","post","createAction","resp","format","get","trackPath","tracks","resourcesName","Mixin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;IAEqBA,K;;;;;;;;;;;2GACDC,I;YAAMC,E,uEAAK,I;;;;;;AACrBC,wB,GAAW,IAAIC,kBAAJ,E;AACXC,yB,GAAYH,MAAMI,eAAKC,EAAL,E;;;AAExBJ,yBAASK,MAAT,CAAmB,KAAKC,YAAxB,mBAAoDJ,SAApD;AACAF,yBAASK,MAAT,CAAmB,KAAKC,YAAxB,cAA+CR,IAA/C;;AAEMS,uB,GAAU;AACdC,wBAAMR,QADQ;AAEdS,2BAAS;AACP,oCAAgB;AADT;AAFK,iB;;uBAOG,KAAKC,MAAL,CAAYC,GAAZ,CAAgBC,IAAhB,CAAqB,KAAKC,YAA1B,EAAwCN,OAAxC,C;;;AAAbO,oB;iDACCA,KAAK,KAAKR,YAAV,C;;;;;;;;;;;;;;;;;;;6GAGGP,E;YAAIgB,M,uEAAS,M;;;;;;;uBACJ,KAAKL,MAAL,CAAYC,GAAZ,CAAgBK,GAAhB,CAAoB,KAAKC,SAAL,CAAelB,EAAf,EAAmBgB,MAAnB,CAApB,C;;;AAAbP,oB;;sBAEFO,WAAW,M;;;;;kDACNP,KAAKU,M;;;kDAGPV,I;;;;;;;;;;;;;;;;;;8BAGCT,E,EAAIgB,M,EAAQ;AACpB,aAAU,KAAKI,aAAf,SAAgCpB,EAAhC,eAA4CgB,MAA5C;AACD;;;EA/BgCK,kB;;kBAAdvB,K","file":"track.js","sourcesContent":["import FormData from 'form-data';\nimport Mixin from 'mixmatch';\nimport uuid from 'uuid';\n\nexport default class Track extends Mixin {\n  async uploadTrack(file, id = null) {\n    const formData = new FormData();\n    const accessKey = id || uuid.v4();\n\n    formData.append(`${this.resourceName}[access_key]`, accessKey);\n    formData.append(`${this.resourceName}[track]`, file);\n\n    const options = {\n      body: formData,\n      headers: {\n        'Content-Type': null\n      }\n    };\n\n    const resp = await this.client.api.post(this.createAction, options);\n    return resp[this.resourceName];\n  }\n\n  async track(id, format = 'json') {\n    const body = await this.client.api.get(this.trackPath(id, format));\n\n    if (format === 'json') {\n      return body.tracks;\n    }\n\n    return body;\n  }\n\n  trackPath(id, format) {\n    return `${this.resourcesName}/${id}/track.${format}`;\n  }\n}\n"]}