{"version":3,"sources":["../../src/actions/track.js"],"names":["Track","file","attributes","formData","FormData","append","resourceName","access_key","options","body","headers","client","api","post","createAction","resp","id","format","get","trackPath","tracks","resourcesName","Mixin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;;;IAEqBA,K;;;;;;;;;;;2GACDC,I,EAAMC,U;;;;;;AAChBC,wB,GAAW,IAAIC,kBAAJ,E;;;AAEjBD,yBAASE,MAAT,CAAmB,KAAKC,YAAxB,mBAAoDJ,WAAWK,UAA/D;AACAJ,yBAASE,MAAT,CAAmB,KAAKC,YAAxB,cAA+CL,IAA/C;;AAEMO,uB,GAAU;AACdC,wBAAMN,QADQ;AAEdO,2BAAS;AACP,oCAAgB;AADT;AAFK,iB;;uBAOG,KAAKC,MAAL,CAAYC,GAAZ,CAAgBC,IAAhB,CAAqB,KAAKC,YAA1B,EAAwCN,OAAxC,C;;;AAAbO,oB;iDACCA,KAAKN,IAAL,CAAU,KAAKH,YAAf,C;;;;;;;;;;;;;;;;;;;6GAGGU,E;YAAIC,M,uEAAS,M;;;;;;;uBACJ,KAAKN,MAAL,CAAYC,GAAZ,CAAgBM,GAAhB,CAAoB,KAAKC,SAAL,CAAeH,EAAf,EAAmBC,MAAnB,CAApB,C;;;AAAbR,oB;;sBAEFQ,WAAW,M;;;;;kDACNR,KAAKW,M;;;kDAGPX,I;;;;;;;;;;;;;;;;;;8BAGCO,E,EAAIC,M,EAAQ;AACpB,aAAU,KAAKI,aAAf,SAAgCL,EAAhC,eAA4CC,MAA5C;AACD;;;EA9BgCK,kB;;kBAAdtB,K","file":"track.js","sourcesContent":["import FormData from 'form-data';\nimport Mixin from 'mixmatch';\n\nexport default class Track extends Mixin {\n  async uploadTrack(file, attributes) {\n    const formData = new FormData();\n\n    formData.append(`${this.resourceName}[access_key]`, attributes.access_key);\n    formData.append(`${this.resourceName}[track]`, file);\n\n    const options = {\n      body: formData,\n      headers: {\n        'Content-Type': null\n      }\n    };\n\n    const resp = await this.client.api.post(this.createAction, options);\n    return resp.body[this.resourceName];\n  }\n\n  async track(id, format = 'json') {\n    const body = await this.client.api.get(this.trackPath(id, format));\n\n    if (format === 'json') {\n      return body.tracks;\n    }\n\n    return body;\n  }\n\n  trackPath(id, format) {\n    return `${this.resourcesName}/${id}/track.${format}`;\n  }\n}\n"]}